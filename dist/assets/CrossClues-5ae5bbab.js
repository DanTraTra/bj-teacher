import{r as n,j as r,a as f,F as Ce,R as Be,c as Ee,d as xo,u as Ue}from"./index-7ab9a8fd.js";import{s as oe}from"./supabaseClient-6c993e79.js";import{B as Le}from"./index-019bd5bd.js";import"./iconBase-2286c984.js";const vo=({onJoin:a,onCreate:c})=>{const[d,g]=n.useState(""),[p,w]=n.useState("normal"),[h,x]=n.useState(2);return r("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:f("div",{className:"bg-white rounded-lg shadow-lg px-8 pt-8 pb-6 w-full max-w-md flex flex-col items-center",children:[r("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Join or Create a Game"}),r("input",{type:"text",placeholder:"Enter Game ID...",value:d,onChange:l=>g(l.target.value),className:"border border-gray-300 rounded px-4 py-2 mb-2 w-full text-center focus:outline-none focus:ring-2 focus:ring-playerOne"}),f("div",{className:"flex flex-col w-full gap-2",children:[r("button",{onClick:()=>a(d),className:"bg-playerOne hover:bg-playerOne text-gray-800 font-semibold py-2 rounded transition",disabled:!d.trim(),children:"Join Game"}),f("div",{className:"flex items-center justify-center my-4",children:[r("div",{className:"flex-1 h-px bg-gray-200"}),r("span",{className:"text-gray-500 text-xs px-3",children:"or"}),r("div",{className:"flex-1 h-px bg-gray-200"})]}),r("button",{onClick:()=>c(p,h),className:"bg-playerTwo hover:bg-playerTwo text-gray-800 font-semibold py-2 rounded transition",children:"Create New Game"}),f("div",{className:"flex gap-3 mb-3",children:[r("div",{className:"flex-1",children:f("select",{value:p,onChange:l=>w(l.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-playerTwo",children:[r("option",{value:"easy",children:"Easy"}),r("option",{value:"normal",children:"Normal"})]})}),r("div",{className:"flex-1",children:f("select",{value:h,onChange:l=>x(Number(l.target.value)),className:"w-full border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-playerTwo",children:[r("option",{value:2,children:"2 Players"}),r("option",{value:3,children:"3 Players"}),r("option",{value:4,children:"4 Players"}),r("option",{value:5,children:"5 Players"}),r("option",{value:6,children:"6 Players"})]})})]})]})]})})},De=({frontContent:a,backContent:c,beginsFlipped:d=!1,cellSize:g="",frontClassName:p="",backClassName:w="",clueCell:h=!1,correctCard:x,onContentEdit:l,isFlipped:C,handleCardFlip:b,rowIndex:A,colIndex:v,resetFlippedCardState:F,setViewingClue:J,highlightClass:pe})=>{const[te,ne]=n.useState(""),[D,ce]=n.useState(54);n.useState("");const[R,H]=n.useState(54),W=n.useRef(null),M=n.useRef(null),E=n.useRef(null),I=n.useRef(null),T=()=>{if(W.current&&E.current){const N=W.current,S=E.current;let z=54;N.style.fontSize=`${z}px`;const de=S.clientWidth-18;if(typeof a.content=="string"&&!a.content.match("^[A-E][1-5]$")){for(;N.scrollWidth>de&&z>8;)z-=2,N.style.fontSize=`${z}px`;ce(z)}else N.style.fontSize=`${S.clientHeight*.5}px`,ce(S.clientHeight*.5)}},re=()=>{if(M.current&&I.current){const N=M.current,S=I.current;let z=54;N.style.fontSize=`${z}px`;const de=S.clientWidth-20;for(;N.scrollWidth>de&&z>8;)z-=2,N.style.fontSize=`${z}px`;H(z)}};n.useEffect(()=>{const N=requestAnimationFrame(()=>{T()});return()=>cancelAnimationFrame(N)},[a]),n.useEffect(()=>{const N=requestAnimationFrame(()=>{re()});return()=>cancelAnimationFrame(N)},[c]),n.useEffect(()=>{E.current&&W.current&&T()},[E.current,W.current]),n.useEffect(()=>{I.current&&M.current&&re()},[I.current,M.current]),n.useEffect(()=>{const N=E.current;if(!N)return;const S=new ResizeObserver(()=>{requestAnimationFrame(()=>{T()})});return S.observe(N),()=>{S.disconnect()}},[E.current]),n.useEffect(()=>{const N=I.current;if(!N)return;const S=new ResizeObserver(()=>{requestAnimationFrame(()=>{re()})});return S.observe(N),()=>{S.disconnect()}},[I.current]);const le=`flip-cross-clues-card 
        aspect-square flex items-center justify-center
        overflow-hidden text-center border border-4
        cursor-pointer`,k="border-[#10563F]",he="border-[#C44104]",me="border-[#F37332]",ae=()=>{b(A,v,h),h||setTimeout(()=>{ne(x==="correct"?k:x==="incorrect"?he:x==="close"?me:"")},1)};return r("button",{className:`${le} ${C?`flipped ${h?"":te}`:`${pe}`}`,onClick:a.color!=""?void 0:()=>ae(),style:{maxWidth:g,maxHeight:g},children:f("div",{className:"flip-cross-clues-card-inner",children:[r("div",{className:`flip-cross-clues-card-front flex items-center justify-center ${p}`,children:r("div",{ref:E,className:"w-full h-full flex items-center justify-center p-2",children:r("span",{ref:W,style:{fontSize:`${D}px`},className:`
                                    ${p}
                                    w-[95%]
                                    whitespace-nowrap
                                    text-center
                                    overflow-hidden
                                    font-bold
                                `,children:a.content})})}),r("div",{className:`flip-cross-clues-card-back bg-white flex items-center justify-center ${w}`,children:r("div",{ref:I,className:"w-full h-full flex items-center justify-center p-2",children:r("span",{ref:M,style:{fontSize:`${R}px`},className:"font-bold",children:c})})})]})})},So=({rowHeaders:a,colHeaders:c,className:d="",style:g={},cellSize:p="",givenRandomCO:w,otherPlayersRandomCO:h,numRows:x,numCols:l,clueCellContent:C,handleClueCellEdit:b,completedCards:A=[],flippedCard:v,resetFlippedCardState:F,frontCellContent:J,correctlyGuessedGrid:pe,handleCardFlip:te,setViewingClue:ne,viewingClue:D,handleHeaderClick:ce,cellColour:R,recentlyFlippedCardsNColours:H,demoMode:W,hintCO:M,bigImage:E,bigCO:I,currentBigImageIndex:T,handlePrevImage:re,handleNextImage:le})=>{const[k,he]=n.useState(null),[me,ae]=n.useState({}),[N,S]=n.useState({}),z=n.useRef(null),de=y=>{if(y){let u=y;return y.colIndex*y.rowIndex%2==0?u={rowIndex:y.rowIndex,colIndex:-1}:u={rowIndex:-1,colIndex:y.colIndex},he(u),u}else return he(null),null};n.useEffect(()=>{de(M)},[M]),n.useEffect(()=>{if(k!==z.current){if(k){ae({});const y=[];J.forEach((O,G)=>{O.forEach((B,q)=>{k.rowIndex!==G&&k.colIndex!==q&&!pe[G][q]&&y.push({row:G,col:q})})});const u=[...y].sort(()=>Math.random()-.5),t=Math.max(1,Math.floor(u.length/5)),j=170;S({}),u.forEach((O,G)=>{const B=Math.floor(G/t)*j,q=`${O.row}-${O.col}`;setTimeout(()=>{ae(U=>({...U,[q]:!0})),setTimeout(()=>{S(U=>({...U,[q]:!0})),ae(U=>{const se={...U};return delete se[q],se})},250)},B)})}else ae({});z.current=k}},[k,J]);const K=(y,u,t=!1,j,O)=>{const G=`flip-cross-clues-card 
      aspect-square flex items-center justify-center
      overflow-hidden text-center text-7xl text-gray-100 hover:text-gray-500 border border-gray-100 border-4`,B=t?"bg-gray-100 font-semibold":"bg-white",q="max-w-full max-h-full object-contain flex items-center justify-center";return r("div",{className:`${G} ${B} ${O?"opacity-20":""}`,style:{maxWidth:p,maxHeight:p},onClick:()=>{ce(y,j)},children:r("div",{className:q,children:y})},u)},L=Array.from({length:l},(y,u)=>String.fromCharCode(65+u));return f(Ce,{children:[r("style",{children:`@keyframes pop {
        0% { transform: scale(1); opacity: 1; }
        50% { transform: scale(1.1); opacity: 0.9; }
        100% { transform: scale(0.8); opacity: 0; }
    }
    
    .pop-out {
        animation: pop 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        will-change: transform, opacity;
    }`}),f("div",{className:`grid gap-0 ${d}`,style:{width:"fit-content",gridTemplateColumns:`repeat(${l+1}, 1fr)`,...g},children:[r(De,{frontContent:{content:" ",color:"white"},backContent:"",beginsFlipped:!1,cellSize:p,frontClassName:"text-gray-500 bg-gray",backClassName:"text-gray-500",clueCell:!0,isFlipped:(v==null?void 0:v.rowIndex)===100&&(v==null?void 0:v.colIndex)===100,handleCardFlip:()=>{},rowIndex:100,colIndex:100,resetFlippedCardState:F,setViewingClue:ne,highlightClass:"border-gray-100"}),c.map((y,u)=>K(y,`col-header-${u}`,!0,`${String.fromCharCode(65+u)}`,W&&((w==null?void 0:w.colIndex)!==u||!D))),E?f(Ce,{children:[a.map((y,u)=>r(Be.Fragment,{children:K(a[u],`row-header-${u}`,!0,`${u+1}`,W&&((w==null?void 0:w.rowIndex)!==u||!D))},`row-header-${u}`)),f("div",{className:"col-start-2 col-span-5 row-start-2 row-span-5 relative flex items-center justify-center bg-gray-100",children:[r("div",{className:"w-full h-full object-contain p-1",children:E}),I&&r("div",{className:"absolute -top-6 left-1 text-[80px] p-4 text-black tracking-wide font-bold z-10 opacity-60",children:I}),T!==null&&f(Ce,{children:[r("button",{onClick:y=>{y.stopPropagation(),re()},className:"absolute h-full w-12 text-center left-2 top-1/2 transform -translate-y-1/2 bg-none bg-opacity-50 text-black p-2 z-20",children:"◀"}),r("button",{onClick:y=>{y.stopPropagation(),le()},className:"absolute h-full w-12 text-center right-2 top-1/2 transform -translate-y-1/2 bg-none bg-opacity-50 text-black p-2 z-20",children:"▶"})]})]},"big-image")]}):J.map((y,u)=>f(Be.Fragment,{children:[K(a[u],`row-header-${u}`,!0,`${u+1}`,W&&((w==null?void 0:w.rowIndex)!==u||!D)),y.map((t,j)=>{const O=`${u}-${j}`,G=D&&t.content===`${L[w.colIndex]}${w.rowIndex+1}`;let B=G?"text-gray-500":"text-gray-200";if(pe[u][j])B=`text-gray-800 bg-${t.color}`;else{const _=H.find(Y=>{var Q,ie;return Y&&((Q=Y.CO)==null?void 0:Q.colIndex)===j&&((ie=Y.CO)==null?void 0:ie.rowIndex)===u});_&&!G?B=`text-${_.colour} bg-white`:B=`${B} bg-white`,W&&((w==null?void 0:w.rowIndex)!==u||(w==null?void 0:w.colIndex)!==j||!D)&&(B=`${B} opacity-20`)}let q="border-gray-100";if(G)q="border-gray-500";else{const _=H.find(Y=>{var Q,ie;return Y&&((Q=Y.CO)==null?void 0:Q.colIndex)===j&&((ie=Y.CO)==null?void 0:ie.rowIndex)===u});_&&(q=`border-${_.colour}`)}const U=h.some(_=>_&&_.rowIndex===u&&_.colIndex===j)?"correct":"incorrect",se=me[O],fe=k!==null&&(k==null?void 0:k.rowIndex)!==u&&(k==null?void 0:k.colIndex)!==j&&N[O];return r(De,{frontContent:fe?{content:"",color:"white"}:t,backContent:U==="correct"?"✓":"✗",beginsFlipped:!1,cellSize:p,frontClassName:`${B} ${se?"pop-out":""}`,backClassName:U==="correct"?"text-correct":"text-wrong",clueCell:!1,correctCard:U,isFlipped:(v==null?void 0:v.rowIndex)===u&&(v==null?void 0:v.colIndex)===j,handleCardFlip:te,rowIndex:u,colIndex:j,resetFlippedCardState:F,setViewingClue:ne,highlightClass:q},`cell-${j}-${u}`)})]},`row-${u}`))]})]})},No=({rowHeaders:a,colHeaders:c,className:d="",cellSize:g=""})=>{(a.length!==5||c.length!==5)&&(console.warn(`GridComponent mismatch: Expected 5 row headers and 5 column headers, but received ${a.length} and ${c.length}. Rendering truncated/padded grid.`),a=[...a,...Array(5).fill("")].slice(0,5),c=[...c,...Array(5).fill("")].slice(0,5));const h=(C,b,A=!1)=>{const v=`
      aspect-square flex items-center justify-center
      overflow-hidden p-1 text-center ${g}
    `,F=A?"bg-gray-100 font-semibold":"bg-white",J="max-w-full max-h-full object-contain flex items-center justify-center";return r("div",{className:`${v} ${F}`,children:r("div",{className:J,children:C})},b)},x=(C,b,A=!1)=>{const v=`flex items-center justify-center
       p-1 text-center bg-white border border-gray-100 border-4 rounded-2xl font-bold text-gray-500
      ${A?"md:rounded-b max-md:rounded-r":"md:rounded-t max-md:rounded-l"}`,F="max-w-full max-h-full object-contain flex items-center justify-center";return r("div",{className:`${v}`,children:r("div",{className:F,children:C})},b)},l=Array.from({length:5},(C,b)=>String.fromCharCode(65+b));return r(Ce,{children:f("div",{className:`grid md:grid-cols-5 max-md:grid-rows-5 max-md:grid-flow-col gap-0 border border-gray-100 ${d}`,style:{width:"fit-content"},children:[c.map((C,b)=>x(`${l[b]}`,`col-header-${b}`,!0)),c.map((C,b)=>h(C,`col-header-${b}`,!0)),a.map((C,b)=>h(C,`col-header-${b}`,!0)),c.map((C,b)=>x(`${b+1}`,`row-header-${b}`,!1))]})})};var xe={},Ve={};(function(a){var c=Ee&&Ee.__values||function(g){var p=typeof Symbol=="function"&&Symbol.iterator,w=p&&g[p],h=0;if(w)return w.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&h>=g.length&&(g=void 0),{value:g&&g[h++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(a,"__esModule",{value:!0}),a.getWordsByCategory=a.wordList=void 0,a.wordList={noun:[{word:"accountant",categories:["profession"]},{word:"ability",categories:["thing"]},{word:"accident",categories:["thing"]},{word:"account",categories:["thing"]},{word:"action",categories:["thing"]},{word:"activity",categories:["thing"]},{word:"actor",categories:["profession"]},{word:"ad",categories:["media"]},{word:"addition",categories:["thing"]},{word:"address",categories:["thing"]},{word:"adult",categories:["people"]},{word:"advantage",categories:["thing"]},{word:"advertisement",categories:["media"]},{word:"afternoon",categories:["time"]},{word:"agency",categories:["thing"]},{word:"agent",categories:["people"]},{word:"air",categories:["thing"]},{word:"airline",categories:["transportation"]},{word:"airplane",categories:["transportation"]},{word:"airport",categories:["transportation","place"]},{word:"alarm",categories:["thing"]},{word:"alligator",categories:["animals"]},{word:"ambulance",categories:["health"]},{word:"analyst",categories:["profession"]},{word:"angle",categories:["thing"]},{word:"animal",categories:["animals"]},{word:"answer",categories:["thing"]},{word:"apartment",categories:["place"]},{word:"apple",categories:["food"]},{word:"application",categories:["thing"]},{word:"appointment",categories:["thing"]},{word:"architect",categories:["profession"]},{word:"argument",categories:["thing"]},{word:"area",categories:["thing"]},{word:"arm",categories:["thing"]},{word:"army",categories:["thing"]},{word:"art",categories:["thing"]},{word:"article",categories:["thing"]},{word:"artist",categories:["profession"]},{word:"australia",categories:["place"]},{word:"author",categories:["profession"]},{word:"autumn",categories:["time"]},{word:"baby",categories:["people","family"]},{word:"baker",categories:["profession"]},{word:"balloon",categories:["thing"]},{word:"banana",categories:["food"]},{word:"barista",categories:["profession"]},{word:"battery",categories:["thing"]},{word:"beach",categories:["place"]},{word:"bear",categories:["animals"]},{word:"beard",categories:["thing"]},{word:"bed",categories:["thing"]},{word:"belgium",categories:["place"]},{word:"bird",categories:["animals"]},{word:"bit",categories:["thing","technology"]},{word:"book",categories:["thing","education"]},{word:"boots",categories:["thing"]},{word:"boy",categories:["people"]},{word:"branch",categories:["thing"]},{word:"breakfast",categories:["thing"]},{word:"brother",categories:["family"]},{word:"businessperson",categories:["people","business"]},{word:"butcher",categories:["profession"]},{word:"byte",categories:["thing","technology"]},{word:"camera",categories:["thing"]},{word:"candle",categories:["thing"]},{word:"car",categories:["transportation"]},{word:"caravan",categories:["transportation"]},{word:"carpenter",categories:["profession"]},{word:"carpet",categories:["thing"]},{word:"cartoon",categories:["media"]},{word:"cat",categories:["animals"]},{word:"chef",categories:["profession"]},{word:"child",categories:["people","family"]},{word:"china",categories:["place"]},{word:"church",categories:["religion"]},{word:"city",categories:["place"]},{word:"coat",categories:["thing"]},{word:"coffeeshop",categories:["place"]},{word:"computer",categories:["thing","technology"]},{word:"continent",categories:["place"]},{word:"controller",categories:["thing","technology"]},{word:"country",categories:["place"]},{word:"cpu",categories:["thing","technology"]},{word:"crayon",categories:["thing"]},{word:"cricket",categories:["animals"]},{word:"crowd",categories:["people"]},{word:"daughter",categories:["family"]},{word:"dawn",categories:["time"]},{word:"daybreak",categories:["time"]},{word:"death",categories:["thing"]},{word:"denmark",categories:["place"]},{word:"dentist",categories:["profession"]},{word:"diamond",categories:["thing"]},{word:"dinner",categories:["food"]},{word:"disease",categories:["thing"]},{word:"doctor",categories:["profession"]},{word:"dog",categories:["animals"]},{word:"dream",categories:["thing"]},{word:"dress",categories:["thing"]},{word:"dusk",categories:["time"]},{word:"easter",categories:["religion"]},{word:"egg",categories:["food"]},{word:"eggplant",categories:["food"]},{word:"egypt",categories:["place"]},{word:"electrician",categories:["profession"]},{word:"elephant",categories:["animals"]},{word:"energy",categories:["thing"]},{word:"engine",categories:["transportation"]},{word:"engineer",categories:["profession"]},{word:"england",categories:["place"]},{word:"eve",categories:["time"]},{word:"evening",categories:["time"]},{word:"eventide",categories:["time"]},{word:"exabyte",categories:["thing","technology"]},{word:"eye",categories:["thing"]},{word:"fall",categories:["time"]},{word:"family",categories:["family"]},{word:"farmer",categories:["profession"]},{word:"father",categories:["people","family"]},{word:"finland",categories:["place"]},{word:"fireman",categories:["profession"]},{word:"fish",categories:["animals"]},{word:"flag",categories:["thing"]},{word:"florist",categories:["profession"]},{word:"flower",categories:["thing"]},{word:"football",categories:["sports"]},{word:"forest",categories:["place"]},{word:"fountain",categories:["thing"]},{word:"france",categories:["place"]},{word:"furniture",categories:["thing"]},{word:"garage",categories:["place"]},{word:"garden",categories:["food"]},{word:"gas",categories:["transportation"]},{word:"ghost",categories:["thing"]},{word:"gigabyte",categories:["thing","technology"]},{word:"girl",categories:["people"]},{word:"glass",categories:["thing"]},{word:"gold",categories:["thing"]},{word:"gpu",categories:["thing","technology"]},{word:"grandmother",categories:["people","family"]},{word:"grass",categories:["thing"]},{word:"greece",categories:["place"]},{word:"guitar",categories:["thing"]},{word:"hair",categories:["thing"]},{word:"hairdresser",categories:["profession"]},{word:"hamburger",categories:["food"]},{word:"helicopter",categories:["transportation"]},{word:"helmet",categories:["thing"]},{word:"holiday",categories:["thing"]},{word:"honey",categories:["food"]},{word:"horse",categories:["animals"]},{word:"hospital",categories:["place"]},{word:"house",categories:["place"]},{word:"hydrogen",categories:["science"]},{word:"ice",categories:["science"]},{word:"insect",categories:["animals"]},{word:"insurance",categories:["thing"]},{word:"intern",categories:["profession"]},{word:"iron",categories:["science"]},{word:"island",categories:["place"]},{word:"jackal",categories:["animals"]},{word:"jelly",categories:["food"]},{word:"jewellery",categories:["thing"]},{word:"jordan",categories:["place"]},{word:"journalist",categories:["profession"]},{word:"joystick",categories:["thing","technology"]},{word:"judge",categories:["profession"]},{word:"juice",categories:["food"]},{word:"kangaroo",categories:["animals"]},{word:"keyboard",categories:["thing","technology"]},{word:"kilobyte",categories:["thing","technology"]},{word:"king",categories:["people"]},{word:"kitchen",categories:["place"]},{word:"kite",categories:["thing"]},{word:"knife",categories:["thing"]},{word:"lamp",categories:["thing"]},{word:"laptop",categories:["thing","technology"]},{word:"lawyer",categories:["profession"]},{word:"leather",categories:["thing"]},{word:"librarian",categories:["profession"]},{word:"library",categories:["place"]},{word:"lifeguard",categories:["profession"]},{word:"lighter",categories:["thing"]},{word:"lion",categories:["animals"]},{word:"lizard",categories:["animals"]},{word:"lock",categories:["thing"]},{word:"london",categories:["place"]},{word:"lunch",categories:["food"]},{word:"machine",categories:["science"]},{word:"magazine",categories:["media"]},{word:"magician",categories:["people"]},{word:"man",categories:["people"]},{word:"manchester",categories:["place"]},{word:"market",categories:["place"]},{word:"match",categories:["thing"]},{word:"mechanic",categories:["profession"]},{word:"megabyte",categories:["thing","technology"]},{word:"memory",categories:["thing","technology"]},{word:"microphone",categories:["thing"]},{word:"midnight",categories:["time"]},{word:"minister",categories:["people","religion"]},{word:"monitor",categories:["thing","technology"]},{word:"monkey",categories:["animals"]},{word:"morn",categories:["time"]},{word:"morning",categories:["time"]},{word:"mother",categories:["people","family"]},{word:"motherboard",categories:["thing","technology"]},{word:"motorcycle",categories:["transportation"]},{word:"mouse",categories:["thing","technology","animals"]},{word:"musician",categories:["profession"]},{word:"nail",categories:["thing"]},{word:"napkin",categories:["thing"]},{word:"needle",categories:["thing"]},{word:"nest",categories:["thing"]},{word:"nigeria",categories:["place"]},{word:"night",categories:["time"]},{word:"nightfall",categories:["time"]},{word:"noon",categories:["time"]},{word:"notebook",categories:["thing"]},{word:"nurse",categories:["profession"]},{word:"ocean",categories:["place"]},{word:"oil",categories:["thing"]},{word:"optician",categories:["profession"]},{word:"orange",categories:["food"]},{word:"oxygen",categories:["science"]},{word:"oyster",categories:["animals"]},{word:"pager",categories:["thing","technology"]},{word:"painter",categories:["profession"]},{word:"painting",categories:["media"]},{word:"park",categories:["place"]},{word:"parrot",categories:["animals"]},{word:"pencil",categories:["thing","education"]},{word:"petabyte",categories:["thing","technology"]},{word:"pharmacist",categories:["profession"]},{word:"photographer",categories:["profession"]},{word:"piano",categories:["thing"]},{word:"pillow",categories:["thing"]},{word:"pilot",categories:["profession"]},{word:"pizza",categories:["food"]},{word:"planet",categories:["science"]},{word:"plastic",categories:["thing"]},{word:"plumber",categories:["profession"]},{word:"policeman",categories:["profession"]},{word:"portugal",categories:["place"]},{word:"postman",categories:["profession"]},{word:"potato",categories:["food"]},{word:"printer",categories:["thing","technology"]},{word:"processor",categories:["thing","technology"]},{word:"psychiatrist",categories:["profession"]},{word:"queen",categories:["people"]},{word:"quill",categories:["thing"]},{word:"rain",categories:["thing"]},{word:"rainbow",categories:["science"]},{word:"raincoat",categories:["thing"]},{word:"ram",categories:["thing","technology"]},{word:"receptionist",categories:["profession"]},{word:"refrigerator",categories:["food"]},{word:"restaurant",categories:["place"]},{word:"river",categories:["thing"]},{word:"rocket",categories:["science"]},{word:"room",categories:["place"]},{word:"rose",categories:["thing"]},{word:"russia",categories:["place"]},{word:"salesclerk",categories:["people","business"]},{word:"salesmen",categories:["profession"]},{word:"sandwich",categories:["food"]},{word:"school",categories:["education"]},{word:"scientist",categories:["profession"]},{word:"scooter",categories:["transportation"]},{word:"secretary",categories:["profession"]},{word:"shampoo",categories:["thing"]},{word:"shoe",categories:["thing"]},{word:"smartphone",categories:["thing","technology"]},{word:"soccer",categories:["sports"]},{word:"solstice",categories:["time"]},{word:"spoon",categories:["thing"]},{word:"spring",categories:["time"]},{word:"state",categories:["place"]},{word:"stone",categories:["thing"]},{word:"student",categories:["people","education"]},{word:"sugar",categories:["food"]},{word:"summer",categories:["time"]},{word:"sundown",categories:["time"]},{word:"sunset",categories:["time"]},{word:"sweden",categories:["place"]},{word:"table",categories:["thing"]},{word:"tailor",categories:["profession"]},{word:"teacher",categories:["people","education","profession"]},{word:"teenager",categories:["people","family"]},{word:"telephone",categories:["thing"]},{word:"television",categories:["media"]},{word:"tent",categories:["thing"]},{word:"terabyte",categories:["thing","technology"]},{word:"thailand",categories:["place"]},{word:"tiger",categories:["animals"]},{word:"toddler",categories:["people","family"]},{word:"tomato",categories:["food"]},{word:"toothbrush",categories:["thing"]},{word:"traffic",categories:["thing"]},{word:"train",categories:["transportation"]},{word:"translator",categories:["profession"]},{word:"truck",categories:["thing","transportation"]},{word:"twilight",categories:["time"]},{word:"uganda",categories:["place"]},{word:"umbrella",categories:["thing"]},{word:"van",categories:["transportation"]},{word:"vase",categories:["thing"]},{word:"vegetable",categories:["food"]},{word:"vr",categories:["thing","technology"]},{word:"vulture",categories:["animals"]},{word:"waiter",categories:["profession"]},{word:"waitress",categories:["profession"]},{word:"wall",categories:["thing"]},{word:"whale",categories:["animals"]},{word:"window",categories:["thing"]},{word:"winter",categories:["time"]},{word:"wire",categories:["thing"]},{word:"wolf",categories:["animals"]},{word:"woman",categories:["people"]},{word:"xylophone",categories:["thing"]},{word:"yacht",categories:["transportation"]},{word:"yak",categories:["animals"]},{word:"yottabyte",categories:["thing","technology"]},{word:"zebra",categories:["animals"]},{word:"zettabyte",categories:["thing","technology"]},{word:"zoo",categories:["animals"]}],adjective:[{word:"abandoned",categories:["condition"]},{word:"abiding",categories:["personality"]},{word:"able",categories:["condition"]},{word:"abrasive",categories:["condition","personality"]},{word:"abnormal",categories:["condition"]},{word:"absurd",categories:["condition"]},{word:"abundant",categories:["quantity"]},{word:"acceptable",categories:["condition"]},{word:"acidic",categories:["taste"]},{word:"acoustic",categories:["sounds"]},{word:"acrid",categories:["condition"]},{word:"adamant",categories:["personality"]},{word:"adorable",categories:["personality"]},{word:"adventurous",categories:["personality"]},{word:"aggressive",categories:["personality"]},{word:"agitated",categories:["personality"]},{word:"agreeable",categories:["personality"]},{word:"alert",categories:["condition"]},{word:"alive",categories:["condition"]},{word:"aloof",categories:["personality"]},{word:"ambitious",categories:["personality"]},{word:"ancient",categories:["time"]},{word:"angry",categories:["personality"]},{word:"annoyed",categories:["personality"]},{word:"antsy",categories:["personality"]},{word:"anxious",categories:["personality"]},{word:"appalling",categories:["personality"]},{word:"appetizing",categories:["taste"]},{word:"apprehensive",categories:["personality"]},{word:"arrogant",categories:["personality"]},{word:"ashamed",categories:["personality"]},{word:"astonishing",categories:["personality"]},{word:"attractive",categories:["appearance"]},{word:"average",categories:["appearance"]},{word:"bad",categories:["condition"]},{word:"bald",categories:["appearance"]},{word:"bashful",categories:["personality"]},{word:"beautiful",categories:["appearance"]},{word:"beefy",categories:["appearance"]},{word:"belligerent",categories:["personality"]},{word:"bent",categories:["condition"]},{word:"best",categories:["condition"]},{word:"better",categories:["condition"]},{word:"bewildered",categories:["personality"]},{word:"big",categories:["size"]},{word:"billions",categories:["quantity"]},{word:"billowy",categories:["appearance"]},{word:"bitter",categories:["taste"]},{word:"black",categories:["color"]},{word:"bland",categories:["taste"]},{word:"blue",categories:["color"]},{word:"blushing",categories:["appearance"]},{word:"bored",categories:["personality"]},{word:"boring",categories:["personality"]},{word:"boundless",categories:["personality"]},{word:"brainy",categories:["personality"]},{word:"brash",categories:["personality"]},{word:"brave",categories:["personality"]},{word:"breezy",categories:["touch"]},{word:"brief",categories:["time"]},{word:"bright",categories:["appearance"]},{word:"broad",categories:["shapes"]},{word:"broken",categories:["condition"]},{word:"brown",categories:["color"]},{word:"bulky",categories:["appearance"]},{word:"bumpy",categories:["touch"]},{word:"burly",categories:["appearance"]},{word:"busy",categories:["personality"]},{word:"cagey",categories:["personality"]},{word:"calm",categories:["personality"]},{word:"callous",categories:["personality"]},{word:"careful",categories:["condition"]},{word:"chilly",categories:["touch"]},{word:"chubby",categories:["appearance"]},{word:"clean",categories:["appearance"]},{word:"clever",categories:["condition"]},{word:"clumsy",categories:["personality"]},{word:"cold",categories:["touch"]},{word:"colossal",categories:["size"]},{word:"cool",categories:["touch"]},{word:"crashing",categories:["sounds"]},{word:"creamy",categories:["taste"]},{word:"crooked",categories:["shapes"]},{word:"cuddly",categories:["touch"]},{word:"curved",categories:["shapes"]},{word:"damaged",categories:["touch"]},{word:"damp",categories:["touch"]},{word:"dazzling",categories:["appearance"]},{word:"dead",categories:["condition"]},{word:"deafening",categories:["sounds"]},{word:"deep",categories:["shapes"]},{word:"defeated",categories:["personality"]},{word:"delicious",categories:["taste"]},{word:"delightful",categories:["personality"]},{word:"dirty",categories:["touch"]},{word:"disgusting",categories:["taste"]},{word:"drab",categories:["appearance"]},{word:"dry",categories:["touch"]},{word:"eager",categories:["personality"]},{word:"early",categories:["time"]},{word:"easy",categories:["condition"]},{word:"echoing",categories:["sounds"]},{word:"elegant",categories:["appearance"]},{word:"embarrassed",categories:["personality"]},{word:"enough",categories:["quantity"]},{word:"faint",categories:["sounds"]},{word:"faithful",categories:["personality"]},{word:"famous",categories:["condition"]},{word:"fancy",categories:["appearance"]},{word:"fast",categories:["time"]},{word:"fat",categories:["size"]},{word:"few",categories:["quantity"]},{word:"fierce",categories:["personality"]},{word:"fit",categories:["appearance"]},{word:"flabby",categories:["appearance"]},{word:"flaky",categories:["touch"]},{word:"flat",categories:["shapes"]},{word:"fluffy",categories:["touch"]},{word:"freezing",categories:["touch"]},{word:"fresh",categories:["taste"]},{word:"full",categories:["quantity"]},{word:"future",categories:["time"]},{word:"gentle",categories:["personality"]},{word:"gifted",categories:["condition"]},{word:"gigantic",categories:["size"]},{word:"glamorous",categories:["appearance"]},{word:"gorgeous",categories:["appearance"]},{word:"gray",categories:["color"]},{word:"greasy",categories:["touch","taste"]},{word:"great",categories:["size"]},{word:"green",categories:["color"]},{word:"grumpy",categories:["personality"]},{word:"hallowed",categories:["condition"]},{word:"handsome",categories:["appearance"]},{word:"happy",categories:["personality"]},{word:"harsh",categories:["sounds"]},{word:"helpful",categories:["condition"]},{word:"helpless",categories:["personality"]},{word:"high",categories:["shapes"]},{word:"hissing",categories:["sounds"]},{word:"hollow",categories:["shapes"]},{word:"hot",categories:["touch","taste"]},{word:"howling",categories:["sounds"]},{word:"huge",categories:["size"]},{word:"hundreds",categories:["quantity"]},{word:"icy",categories:["touch"]},{word:"immense",categories:["size"]},{word:"important",categories:["condition"]},{word:"incalculable",categories:["quantity"]},{word:"inexpensive",categories:["condition"]},{word:"itchy",categories:["personality"]},{word:"jealous",categories:["personality"]},{word:"jolly",categories:["personality"]},{word:"juicy",categories:["taste"]},{word:"kind",categories:["personality"]},{word:"large",categories:["size"]},{word:"late",categories:["time"]},{word:"lazy",categories:["personality"]},{word:"lemon",categories:["color"]},{word:"limited",categories:["quantity"]},{word:"little",categories:["size","quantity"]},{word:"lively",categories:["personality"]},{word:"long",categories:["time","appearance"]},{word:"loose",categories:["touch"]},{word:"loud",categories:["sounds"]},{word:"low",categories:["shapes"]},{word:"magnificent",categories:["appearance"]},{word:"mammoth",categories:["size"]},{word:"mango",categories:["color"]},{word:"many",categories:["quantity"]},{word:"massive",categories:["size"]},{word:"mealy",categories:["condition"]},{word:"melodic",categories:["sounds"]},{word:"melted",categories:["touch"]},{word:"microscopic",categories:["size"]},{word:"millions",categories:["quantity"]},{word:"miniature",categories:["size"]},{word:"modern",categories:["time"]},{word:"moldy",categories:["taste"]},{word:"most",categories:["quantity"]},{word:"muscular",categories:["appearance"]},{word:"mushy",categories:["condition"]},{word:"mysterious",categories:["personality"]},{word:"narrow",categories:["shapes"]},{word:"nervous",categories:["personality"]},{word:"nice",categories:["personality"]},{word:"noisy",categories:["sounds"]},{word:"numerous",categories:["quantity"]},{word:"nutritious",categories:["taste"]},{word:"nutty",categories:["taste"]},{word:"obedient",categories:["personality"]},{word:"obnoxious",categories:["personality"]},{word:"odd",categories:["condition"]},{word:"old",categories:["time"]},{word:"orange",categories:["color"]},{word:"panicky",categories:["personality"]},{word:"petite",categories:["size"]},{word:"pitiful",categories:["personality"]},{word:"plain",categories:["appearance"]},{word:"plump",categories:["appearance"]},{word:"polite",categories:["personality"]},{word:"poor",categories:["condition"]},{word:"powerful",categories:["condition"]},{word:"prehistoric",categories:["time"]},{word:"prickly",categories:["touch"]},{word:"proud",categories:["personality"]},{word:"puny",categories:["size"]},{word:"purple",categories:["color"]},{word:"purring",categories:["sounds"]},{word:"putrid",categories:["taste"]},{word:"quaint",categories:["appearance"]},{word:"quick",categories:["time"]},{word:"quiet",categories:["sounds"]},{word:"rancid",categories:["taste"]},{word:"rapid",categories:["time"]},{word:"rapping",categories:["sounds"]},{word:"raspy",categories:["sounds"]},{word:"red",categories:["color"]},{word:"refined",categories:["shapes"]},{word:"repulsive",categories:["personality"]},{word:"rhythmic",categories:["sounds"]},{word:"rich",categories:["condition"]},{word:"ripe",categories:["taste"]},{word:"rotten",categories:["taste"]},{word:"rough",categories:["touch"]},{word:"round",categories:["shapes"]},{word:"salmon",categories:["color"]},{word:"salty",categories:["taste"]},{word:"savory",categories:["taste"]},{word:"scarce",categories:["quantity"]},{word:"scary",categories:["personality"]},{word:"scrawny",categories:["size"]},{word:"screeching",categories:["sounds"]},{word:"scruffy",categories:["appearance"]},{word:"shaggy",categories:["touch"]},{word:"shallow",categories:["shapes"]},{word:"shapely",categories:["appearance"]},{word:"sharp",categories:["touch"]},{word:"short",categories:["size","appearance","time"]},{word:"shrilling",categories:["sounds"]},{word:"shy",categories:["condition"]},{word:"silly",categories:["personality"]},{word:"skinny",categories:["appearance","shapes"]},{word:"slimy",categories:["touch"]},{word:"slow",categories:["time"]},{word:"small",categories:["size"]},{word:"some",categories:["quantity"]},{word:"sour",categories:["taste"]},{word:"sparse",categories:["quantity"]},{word:"spicy",categories:["taste"]},{word:"spoiled",categories:["taste"]},{word:"square",categories:["shapes"]},{word:"squeaking",categories:["sounds"]},{word:"stale",categories:["taste"]},{word:"steep",categories:["shapes"]},{word:"sticky",categories:["touch"]},{word:"stocky",categories:["appearance"]},{word:"straight",categories:["shapes"]},{word:"strong",categories:["touch"]},{word:"substantial",categories:["quantity"]},{word:"sweet",categories:["taste"]},{word:"swift",categories:["time"]},{word:"tall",categories:["size"]},{word:"tangy",categories:["taste"]},{word:"tart",categories:["taste"]},{word:"tasteless",categories:["taste"]},{word:"tasty",categories:["taste"]},{word:"teeny",categories:["size"]},{word:"tender",categories:["condition"]},{word:"thankful",categories:["personality"]},{word:"thoughtless",categories:["personality"]},{word:"thousands",categories:["quantity"]},{word:"thundering",categories:["sounds"]},{word:"tight",categories:["touch"]},{word:"tinkling",categories:["sounds"]},{word:"tiny",categories:["size"]},{word:"ugly",categories:["appearance"]},{word:"uneven",categories:["touch"]},{word:"unimportant",categories:["condition"]},{word:"uninterested",categories:["condition"]},{word:"unkempt",categories:["appearance"]},{word:"unsightly",categories:["appearance"]},{word:"uptight",categories:["personality"]},{word:"vast",categories:["condition"]},{word:"victorious",categories:["personality"]},{word:"wailing",categories:["sounds"]},{word:"warm",categories:["touch"]},{word:"weak",categories:["touch"]},{word:"wet",categories:["touch"]},{word:"whining",categories:["sounds"]},{word:"whispering",categories:["sounds"]},{word:"white",categories:["color"]},{word:"wide",categories:["shapes"]},{word:"witty",categories:["personality"]},{word:"wonderful",categories:["personality"]},{word:"wooden",categories:["touch"]},{word:"worried",categories:["personality"]},{word:"wrong",categories:["condition"]},{word:"yellow",categories:["color"]},{word:"young",categories:["time"]},{word:"yummy",categories:["taste"]},{word:"zealous",categories:["personality"]}]};function d(g,p){var w,h;p===void 0&&(p=[]);var x=new Set(p),l=[];try{for(var C=c(a.wordList[g]),b=C.next();!b.done;b=C.next()){var A=b.value;(p.length===0||A.categories.some(function(v){return x.has(v)}))&&l.push(A.word)}}catch(v){w={error:v}}finally{try{b&&!b.done&&(h=C.return)&&h.call(C)}finally{if(w)throw w.error}}return l}a.getWordsByCategory=d})(Ve);var Fe=Ee&&Ee.__assign||function(){return Fe=Object.assign||function(a){for(var c,d=1,g=arguments.length;d<g;d++){c=arguments[d];for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(a[p]=c[p])}return a},Fe.apply(this,arguments)};Object.defineProperty(xe,"__esModule",{value:!0});xe.totalUniqueSlugs=Ke=xe.generateSlug=void 0;var _e=Ve,Je=3;function $o(a,c){for(var d=a||Je,g={partsOfSpeech:Ye(d),categories:{},format:"kebab"},p=Fe(Fe({},g),c),w=[],h=0;h<d;h++){var x=p.partsOfSpeech[h],l=_e.getWordsByCategory(p.partsOfSpeech[h],p.categories[x]),C=l[Math.floor(Math.random()*l.length)];w.push(C)}return ko(w,p.format)}var Ke=xe.generateSlug=$o;function Ye(a){for(var c=[],d=0;d<a-1;d++)c.push("adjective");return c.push("noun"),c}function ko(a,c){return c==="kebab"?a.join("-").toLowerCase():c==="camel"?a.map(function(d,g){return g===0?d.toLowerCase():d[0].toUpperCase()+d.slice(1).toLowerCase()}).join(""):c==="lower"?a.join(" ").toLowerCase():c==="sentence"?a.map(function(d,g){return g===0?d[0].toUpperCase()+d.slice(1).toLowerCase():d}).join(" "):a.map(function(d){return d[0].toUpperCase()+d.slice(1).toLowerCase()}).join(" ")}function jo(a,c){for(var d,g,p=_e.getWordsByCategory("adjective",(d=c==null?void 0:c.categories)===null||d===void 0?void 0:d.adjective).length,w=_e.getWordsByCategory("noun",(g=c==null?void 0:c.categories)===null||g===void 0?void 0:g.noun).length,h={adjective:p,noun:w},x=a||Je,l=(c==null?void 0:c.partsOfSpeech)||Ye(x),C=1,b=0;b<x;b++)C*=h[l[b]];return C}xe.totalUniqueSlugs=jo;const zo=({playerNames:a,playerColours:c,onSelectPlayer:d})=>{const g=w=>({playerOne:"bg-playerOne hover:bg-playerOne",playerTwo:"bg-playerTwo hover:bg-playerTwo",playerThree:"bg-playerThree hover:bg-playerThree",playerFour:"bg-playerFour hover:bg-playerFour",playerFive:"bg-playerFive hover:bg-playerFive",playerSix:"bg-playerSix hover:bg-playerSix"})[w]||"bg-gray-200 hover:bg-gray-300",p=w=>({1:"col-span-1",2:"col-span-2",3:"col-span-3",4:"col-span-4",5:"col-span-5",6:"col-span-6"})[w]||"col-span-1";return r("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:f("div",{className:"bg-white rounded-lg shadow-lg px-6 py-6 w-full max-w-md flex flex-col items-center",children:[r("h2",{className:"text-2xl font-bold mb-5 text-center",children:"Select your name"}),r("div",{className:"w-full gap-2 grid grid-cols-6",children:a.slice(1,a.length).map((w,h)=>{let x=Math.ceil(a.length/3);return a.length-1==2||a.length-1==4?x=3:a.length-1==3||a.length-1==6?x=2:a.length-1==5&&(h-1<2?x=2:x=3),r("button",{onClick:()=>d(h+1),className:`px-3 w-full overflow-hidden ${p(x)} ${g(c[h+1])} text-gray-800 font-semibold py-2 rounded transition`,children:w},h)})})]})})},Po=async()=>{const{data:a,error:c}=await oe.storage.from("image-link-images").list("",{limit:1e3});return c?(console.error("Error listing images from Supabase:",c.message),[]):((a==null?void 0:a.map(d=>oe.storage.from("image-link-images").getPublicUrl(d.name).data.publicUrl))||[]).filter(Boolean)},He=async(a=10)=>(await Po()).sort(()=>.5-Math.random()).slice(0,a);function Pe(a,c){if(c<=0)throw new Error("number of columns must be greater than 0");const d=[];for(let g=0;g<a.length;g+=c)d.push(a.slice(g,g+c));return d}function Eo(a){return a.flat()}function Oe(a,c){let d;Array.isArray(a[0])?d=a.flat():d=a;const g=d.map(p=>!p.content.match(`[A-${String.fromCharCode(65+c-1)}][1-9]`));return Pe(g,c)}const ze="Hyperlink",Fo=()=>{const{id:a}=xo(),c=Ue();n.useState(!a);const[d,g]=n.useState(!1),[p,w]=n.useState(0),[h,x]=n.useState(0),[l,C]=n.useState(0),[b,A]=n.useState("View Card & Give Clue"),[v,F]=n.useState(!1),[J,pe]=n.useState(!0),[te,ne]=n.useState([]),[D,ce]=n.useState([]),[R,H]=n.useState(null),[W,M]=n.useState(""),[E,I]=n.useState(null),[T,re]=n.useState([]),[le,k]=n.useState([[]]),[he,me]=n.useState([]),[ae,N]=n.useState([]);n.useState(0);const[S,z]=n.useState("?"),[de,K]=n.useState(!1),[L,V]=n.useState("view"),[y,u]=n.useState(["","playerOne","playerTwo","playerThree","playerFour","playerFive","playerSix"]),[t,j]=n.useState({imageUrls:[],randomCO:[{rowIndex:-1,colIndex:-1}],availiableRandomCo:[],clueCellContent:[],frontCellContent:[],completedCards:[],incorrectGuessCount:0,playerCount:2,playerNames:[null,null],numRows:0,numCols:0,recentlyFlippedCard:[null,null],gamelog:[]}),[O,G]=n.useState(0),[B,q]=n.useState([]),[U,se]=n.useState(!1),[fe,_]=n.useState(null),[Y,Q]=n.useState("tall"),ie=async()=>{se(!0);try{const e=await He(1e3);q(e),console.log(`Fetched ${e.length} Supabase images`)}catch(e){console.error("Error fetching Supabase images:",e)}finally{se(!1)}},Ae=async e=>{if(console.log("handleJoin"),e.trim()){const{data:o,error:i}=await oe.from(ze).select("state").eq("id",e.trim()).single();if(i||!o||!o.state){alert("Could not find game with that ID.");return}const s=o.state;k(Oe(s.frontCellContent||[],s.numRows)),me(s.incorrectGuessCountP1||[0]),N(s.incorrectGuessCountP2||[0]),console.log("joining game, current state:",s),j(s),c(`/image_link/${e.trim()}`)}},Qe=async(e,o)=>{console.log("handleCreate"),g(!0);let i=0;e==="easy"?i=3:e==="normal"&&(i=5),w(i),x(i);const s=await He(i*i);console.log("images",s),console.log("setRandomCO(Random1)");const m=[{rowIndex:-1,colIndex:-1}],$=Xe(i,i);for(let Z=1;Z<=o;Z++){const ee=Math.floor(Math.random()*$.length);m.push($[ee]),$.splice(ee,1)}const ke=Array.from({length:i},(Z,ee)=>Array.from({length:i},(Go,Co)=>({content:`${String.fromCharCode(65+Co)}${ee+1}`,color:""}))).flat(),je=prompt("Enter your name"),ye=[];for(let Z=2;Z<=o;Z++){const ee=prompt(`Enter Player ${Z}'s name`);if(!ee||ee.trim()===""){alert("Please enter a name for Player "+Z);return}ye.push(ee.trim())}const be=Ke(2);console.log("game_code",be);const ue={imageUrls:s,randomCO:m,availiableRandomCo:$,clueCellContent:Array(o+1).fill("?"),frontCellContent:ke,completedCards:[],incorrectGuessCount:0,playerNames:[null,je,...ye],playerCount:o,numRows:i,numCols:i,recentlyFlippedCard:Array(o+1).fill(null),gamelog:[]};j(ue),console.log("newState",ue);const{data:Te,error:Io}=await oe.from("Hyperlink").insert([{state:{...ue},game_code:be}]).select("id").single();g(!1),Te&&Te.id?c(`/image_link/${Te.id}`):alert("Failed to create game. Please try again.")};function Xe(e,o){const i=[];for(let s=0;s<e;s++)for(let m=0;m<o;m++)i.push({rowIndex:s,colIndex:m});for(let s=i.length-1;s>0;s--){const m=Math.floor(Math.random()*(s+1));[i[s],i[m]]=[i[m],i[s]]}return i}const Ze=Array.from({length:h},(e,o)=>String.fromCharCode(65+o)),ve=()=>window.innerWidth<=window.innerHeight||"ontouchstart"in window&&window.innerWidth<=window.innerHeight?`${Math.min(100,100)}vw`:`${Math.min(80-Math.ceil(t.playerCount/2)*5,100)}vh`;n.useEffect(()=>{const e=window.innerWidth<=window.innerHeight||"ontouchstart"in window&&window.innerWidth<=window.innerHeight;Q(e?"tall":"wide")},[window.innerWidth,window.innerHeight]);const eo=()=>{if(t.imageUrls.length<t.numRows*2){console.log("No images available yet");return}const e=t.imageUrls.slice(0,t.numRows),o=t.imageUrls.slice(t.numRows,t.numRows*2),i=e.map(($,P)=>r("img",{src:$,alt:`row-${P}`,className:"w-full h-full object-contain grayscale"},`row-${P}`));ne(i);const s=o.map(($,P)=>r("img",{src:$,alt:`col-${P}`,className:"w-full h-full object-contain grayscale"},`col-${P}`));ce(s);const m=[...i.map(($,P)=>({element:$,co:`${P+1}`})),...s.map(($,P)=>({element:$,co:`${String.fromCharCode(65+P)}`}))];re(m)};n.useEffect(()=>{a&&(Ae(a),console.log(" joining game",t))},[]),n.useEffect(()=>{d&&ie()},[d]),n.useEffect(()=>{eo()},[t.imageUrls]);const Ie=e=>{const o=[...t.clueCellContent];o[l]=e,j({...t,clueCellContent:o}),console.log("handleClueCellEdit",e),Se({...t,clueCellContent:o,gamelog:e=="?"?[...t.gamelog]:[...t.gamelog,{player:l,action:"gave clue",detail:e}]})},oo=n.useRef(!1);n.useEffect(()=>{if(!a)return;(async()=>{const{data:i,error:s}=await oe.from(ze).select("state").eq("id",a).single();if(i&&typeof i=="object"&&Object.keys(i).length>0&&"state"in i&&i.state){const m=i.state;k(Oe(m.frontCellContent,m.numCols)),console.log("fetched gamestate. Setting state to",m),j(m)}oo.current=!0})();const o=oe.channel("realtime:game_"+a).on("postgres_changes",{event:"*",schema:"public",table:ze,filter:`id=eq.${a}`},i=>{if(i.new&&typeof i.new=="object"&&Object.keys(i.new).length>0&&"state"in i.new&&i.new.state){const s=i.new.state;k(Oe(s.frontCellContent,s.numCols)),j(s)}}).subscribe();return()=>{oe.removeChannel(o)}},[a]);const Se=async e=>{const o={...e};console.log("updateGameState",o),await oe.from(ze).update({state:o}).eq("id",a)},[X,ge]=n.useState(null),to=()=>{console.log("resetFlippedCardState",X),ge(null)},ro=(e,o,i)=>{if(t.clueCellContent.filter((s,m)=>m!==l).every(s=>s==="?")&&!i){const s=t.playerNames.filter((m,$)=>$!==l&&t.clueCellContent[$]==="?"&&m!==null);console.log("playersWithNoClues",s),alert(`${s.slice(0,s.length-1).concat().join(", ")+(s.length-1>=1?" and ":"")+s.slice(s.length-1)} needs to give a clue first! Go tell 'em!`)}else if(!(e===(X==null?void 0:X.rowIndex)&&o===(X==null?void 0:X.colIndex))){if(ge({rowIndex:e,colIndex:o}),console.log("Setting viewingClue to false"),F(!1),K(!1),console.log("gameState.randomCO",t.randomCO.some(s=>s.rowIndex===e&&s.colIndex===o)&&(t.randomCO[l].rowIndex!==e||t.randomCO[l].colIndex!==o)),t.randomCO.filter((s,m)=>t.clueCellContent[m]!=="?").some(s=>s.rowIndex===e&&s.colIndex===o)&&(t.randomCO[l].rowIndex!==e||t.randomCO[l].colIndex!==o)){const s=t.randomCO.findIndex($=>$.rowIndex===e&&$.colIndex===o);console.log("guessedClueBelongingToPlayer",s);const m=t.clueCellContent;A("View Card & Give Clue"),k($=>{const P=[...$];return P[e][o]=!0,P}),setTimeout(()=>{console.log("User flipped the correct card"),ge(null),F(!1)},1e3),setTimeout(()=>{const P=[...Pe(t.frontCellContent,t.numCols)];P[e][o]={content:m[s],color:y[s]};const ke=[...t.clueCellContent];ke[s]="?";const je=Math.floor(Math.random()*t.availiableRandomCo.length),ye=[...t.randomCO];ye[s]=t.availiableRandomCo[je];const be=[...t.availiableRandomCo];be.splice(je,1);const ue={...t,clueCellContent:ke,randomCO:ye,availiableRandomCo:be,frontCellContent:Eo(P),completedCards:[...t.completedCards,`${Ze[o]}${e+1}`],incorrectGuessCount:t.incorrectGuessCount,gamelog:[...t.gamelog,{player:l,action:`guessed ${String.fromCharCode(65+o)}${e+1} ✓`,detail:{rowIndex:e,colIndex:o}}]};Se(ue),console.log("updatedGameState",ue),z("?"),_(null)},1e3)}else if(!i){const s=[...t.recentlyFlippedCard];s[l]={CO:{rowIndex:e,colIndex:o},colour:y[l]},Se({...t,incorrectGuessCount:t.incorrectGuessCount+1,recentlyFlippedCard:s,gamelog:[...t.gamelog,{player:l,action:`guessed ${String.fromCharCode(65+o)}${e+1} ✗`,detail:{rowIndex:e,colIndex:o}}]})}}};n.useEffect(()=>{t.clueCellContent[l]!=="?"?(V(null),A("guess the card")):V("view")},[t.clueCellContent]),n.useEffect(()=>{},[le]);const ao=e=>{console.log("isViewingClue called with:",e),F(e)},so=e=>{z(e.target.value)},Re=()=>{console.log("handleViewCard called",t),t.clueCellContent[l]==="?"&&(F(!0),K(!0),V("give"),_(null)),O===0&&G(1)},io=()=>{V("input"),K(!1),ge(null),G(2)},We=()=>{S.split(" ").length>=2?alert("Please enter a single word"):S!==""&&(Ie(S),z("?"),V("view"),ge(null),H(null),A("guess the card"),F(!1))},no=e=>{e.key==="Enter"&&We()},co=()=>{S.split(" ").length>=2?alert("Please enter a single word"):S!==""&&(Ie(S),z("?"),V("view"),ge(null),G(1),F(!1))},lo=()=>{V("input")},Me=(e,o)=>{if(R)H(null),M(""),I(null);else{H(e),M(o);const i=T.findIndex(s=>s.element===e);I(i)}},go=()=>{if(E!==null&&T.length>0){const e=(E-1+T.length)%T.length,o=T[e];H(o.element),M(o.co),I(e)}},wo=()=>{if(E!==null&&T.length>0){const e=(E+1)%T.length,o=T[e];H(o.element),M(o.co),I(e)}},uo=e=>{C(e),console.log("player on this device",e)},Ge=e=>["One","Two","Three","Four","Five","Six"][e-1]||"None",qe=({playerName:e,playerNumber:o})=>{const i=Ge(o);return r("span",{className:`text-player${i}Dark bg-player${i} px-1 rounded-lg whitespace-nowrap`,children:e||"Unknown Player"})},po=(e,o,i)=>{const s=e.detail,m=Ge(s),[$,P]=e.action.split("for ");return f("span",{className:"flex flex-row items-center",children:[r(qe,{playerName:t.playerNames[e.player],playerNumber:e.player}),r("span",{className:"mx-1 whitespace-nowrap",children:"got a hint for"}),r("span",{className:`bg-player${m} text-player${m}Dark px-1 rounded-lg whitespace-nowrap`,children:P})]},o)},ho=(e,o,i)=>{const s=e.action.includes("✓")?"text-correct":e.action.includes("✗")?"text-wrong":"";return f("span",{className:"flex flex-row items-center gap-1",children:[r(qe,{playerName:t.playerNames[e.player],playerNumber:e.player}),r("span",{className:"whitespace-nowrap "+s,children:e.action})]},o)},mo=(e,o,i)=>f("span",{className:"flex flex-row items-center gap-1",children:[r(qe,{playerName:t.playerNames[e.player],playerNumber:e.player}),f("span",{className:"whitespace-nowrap",children:[e.action,":"]}),r("span",{className:"whitespace-nowrap",children:e.detail})]},o),fo=(e,o)=>(Ge(e.player),e.detail===null?null:typeof e.detail=="string"?mo(e,o):e.action.includes("hint")?po(e,o):ho(e,o));n.useEffect(()=>{console.log("buttonState",L)},[L]),n.useEffect(()=>{console.log("gameState updated",t)},[t]);const yo=e=>{fe==null?(_(e),V("view")):_(null),F(!1),K(!1);const o=t.randomCO.findIndex(i=>i.rowIndex===e.rowIndex&&i.colIndex===e.colIndex);console.log("playersClue",o),Se({...t,gamelog:[...t.gamelog,{player:l,action:`got a hint for ${t.clueCellContent[o]}`,detail:o}]})},bo=e=>r("div",{className:"h-full overflow-x-scroll w-full bg-white bg-gradient-to-r from-white to-gray-100 via-white via-80%",children:r("div",{className:`justify-start w-full h-full flex flex-row py-1.5 px-2 text-left text-sm text-gray-800 ${e?"hidden":""}`,children:t.gamelog.slice().reverse().map((o,i,s)=>o&&f("div",{className:"flex items-center",children:[r("div",{className:"whitespace-nowrap",children:fo(o,i)}),i!==s.length-1&&r("div",{className:"h-5 w-px bg-gray-200 mx-1.5"})]},i))})}),Ne="text-xs h-8 px-5 py-2 text-white rounded-sm bg-gray-500 font-semibold whitespace-nowrap";if(!a)return r(vo,{onJoin:Ae,onCreate:Qe});if(l===0)return r(zo,{onSelectPlayer:uo,playerNames:t.playerNames||["Player One","Player Two"],playerColours:y});const $e=t.playerNames.filter((e,o)=>o!==l&&t.clueCellContent[o]==="?"&&e!==null),we=t.playerNames.filter((e,o)=>o!==l&&t.clueCellContent[o]!=="?"&&e!==null);return r("div",{className:"flex flex-row h-full justify-center items-center pb-4 pl",children:f("div",{className:"flex flex-col gap-2",children:[r("div",{className:"grid grid-cols-6 h-fit px-1",style:{width:ve()},id:"playerClues",children:t.clueCellContent.slice(1,t.clueCellContent.length).map((e,o)=>{const i=t.clueCellContent.length-1;let s="";i%2===0||o+1<i?s="col-span-3":s="col-span-6";let m="";return i>=5,o===0&&(m="rounded-tl-2xl"),o===1&&(m="rounded-tr-2xl"),r("div",{className:`flex flex-col text-xs px-2 py-2 h-full justify-center items-center overflow-hidden text-gray-800 bg-${y[o+1]} ${s} ${m}`,children:f("div",{className:`flex flex-col w-full h-full justify-center items-center text-xs text-[#6B7280] ${o+1!==l,""}`,children:[e!="?"?o+1==l?r("span",{className:"w-full text-left text-xs pl-1.5 -mb-1",children:"Your clue: "}):f("span",{className:"w-full text-left text-xs pl-1.5 -mb-1",children:[t.playerNames[o+1],"'s clue: "]}):o+1===l?f("div",{className:"flex flex-row justify-center items-center gap-2",children:[r("span",{children:"View card"}),r(Le,{}),r("span",{children:"Give clue"})]}):f("span",{children:[t.playerNames[o+1]," is thinking of a clue..."]}),e!="?"?r("span",{className:"flex flex-col text-center text-2xl text-gray-800 font-medium py-1",children:t.clueCellContent[o+1]}):"",e!="?"?o+1!=l&&fe==null?r("button",{className:"flex flex-col w-full items-end text-xs text-gray-500 -my-1 h-4",onClick:()=>yo(t.randomCO[o+1]),children:r("span",{className:"bg-white bg-opacity-30 py-0.5 px-1.5 -mt-1 rounded w-fit",children:"Hint"})}):r("button",{className:"flex flex-col w-full items-end text-xs text-gray-500 -my-1 h-4 cursor-default",children:r("span",{className:"bg-white bg-opacity-30 py-0.5 px-1.5 -mt-1 rounded w-fit hidden",children:"Edit"})}):r(Ce,{})]},o)},o)})}),r("div",{className:"flex flex-col flex-start items-center space-y-1 overflow-y-auto w-fit gap-1",id:"gridBoard",children:f("div",{className:"h-full",children:[t.gamelog.filter(e=>e.player==l).length===0&&O===0&&R==null&&f("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 flex flex-col items-center justify-center z-10 gap-2",children:[f("span",{className:"text-xs text-gray-600 font-semibold text-center",children:["Start by giving ",r("br",{})," a clue for your card"]}),(L=="view"||L=="input")&&t.clueCellContent[l]=="?"&&t.gamelog.filter(e=>e.player==l).length===0&&r("button",{onClick:Re,className:Ne+(L=="view"?" animate-pulse":""),children:"View card"})]}),J?te.length&&r(So,{rowHeaders:te,colHeaders:D,cellSize:"auto",className:"mx-auto",style:{width:ve(),height:ve(),aspectRatio:"1"},givenRandomCO:t.randomCO[l],otherPlayersRandomCO:t.randomCO.map((e,o)=>o!=l&&t.clueCellContent[o]!=="?"?e:null),numRows:t.numRows,numCols:t.numCols,frontCellContent:Pe(t.frontCellContent,t.numCols),handleCardFlip:ro,clueCellContent:t.clueCellContent[l],handleClueCellEdit:Ie,flippedCard:X,resetFlippedCardState:to,completedCards:t.completedCards,setViewingClue:ao,viewingClue:v,correctlyGuessedGrid:le,handleHeaderClick:(e,o)=>Me(e,o),cellColour:y[l],recentlyFlippedCardsNColours:t.recentlyFlippedCard.filter((e,o)=>o===l?null:e),demoMode:t.gamelog.filter(e=>e.player==l).length===0&&O<2,hintCO:fe,bigImage:R,bigCO:W,currentBigImageIndex:E,handlePrevImage:go,handleNextImage:wo}):r(No,{rowHeaders:te,colHeaders:D,cellSize:"size-[150px]"})]})}),r("div",{id:"gameLog",className:"relative w-full flex flex-col justify-between items-start pt-0",children:Pe(t.gamelog.filter(e=>e.action.includes("✗")||e.action.includes("hint")),48).map((e,o)=>r("div",{className:"flex flex-row justify-start gap-1.5 px-1 pb-1 w-full",children:e.map((i,s)=>r("div",{className:`w-full rounded-full h-1.5 ${i.action.includes("hint")?"bg-"+y[i.player]:"bg-red-300"}`},s))},o))}),f("div",{id:"playerControls",className:"flex flex-row justify-end items-start pt-0 px-1 gap-2",style:{width:ve()},children:[t.gamelog.length>0&&bo(!1),f("div",{className:"flex flex-row h-8 items-center gap-2 justify-end whitespace-nowrap",children:[R&&r("button",{onClick:()=>Me(R,W),className:Ne,children:"Close image"}),!R&&L=="view"&&t.clueCellContent[l]=="?"&&t.gamelog.filter(e=>e.player==l).length>0&&r("button",{onClick:Re,className:Ne+(L=="view"?"animate-pulse":""),children:"View card"}),!R&&L=="give"&&r("button",{onClick:io,className:Ne+(O==1?" animate-pulse":""),children:"Give a clue for this card"}),!R&&L==="input"&&r("input",{type:"text",value:S==="?"?"":S,placeholder:`Give a clue for ${String.fromCharCode(65+t.randomCO[l].colIndex)}${t.randomCO[l].rowIndex+1}`,onChange:so,onKeyDown:no,onBlur:co,onFocus:lo,className:`w-52 text-center text-sm px-2 py-1 placeholder:text-gray-500
                            focus:outline-none focus:ring-0 focus:border-gray-400 border-b-2 border-gray-400
                            bg-transparent border-t-0 border-l-0 border-r-0 h-8`,autoFocus:!0}),!R&&L=="input"&&r("button",{onClick:We,className:`text-md h-8 p-2 bg-${y[l]} font-bold rounded-sm text-gray-800`,children:r(Le,{})}),t.clueCellContent[l]!="?"&&!R&&r("span",{className:"w-full text-sm text-gray-800 text-right font-semibold",children:$e.length>=t.playerCount-$e.length?f("span",{className:"text-sm pl-2",children:["Wait for ",$e.length==1?$e[0]:"others"," to give a clue..."]}):"Guess "+we.slice(0,we.length-1).concat().join("'s, ")+(we.length-1>=1?"'s and ":"")+we.slice(we.length-1)+"'s card"+(we.length-1>1?"s!":"!")})]})]})]})})};function Ao(){return Ue(),r("div",{className:"flex flex-col justify-center items-center h-screen bg-gray-100",children:r(Fo,{})})}export{Ao as default};
